generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}



model User {
  id        String  @id @default(uuid())
  name      String
  email     String  @unique
  password  String
  
  teams     Team[]
  leagues   League[] 
}


model Team {
  id      String    @id @default(uuid())
  name    String

  user    User      @relation(fields: [userId], references: [id])
  userId  String

  leagues League[]
  matchTeams MatchTeam[]
}


model League {
  id       String  @id @default(uuid())
  name     String

  user     User    @relation(fields: [userId], references: [id])
  userId   String

  teams    Team[]
  fixtures Round[]
}


// Fixtures Struct
model Round {
  id       String  @id @default(uuid())
  
  number   Int

  league   League  @relation(fields: [leagueId], references: [id])
  leagueId String
  
  matches  Match[]
}


model Match {
  id        String    @id @default(uuid())
  finished  Boolean?
  
  home      MatchTeam @relation("MatchesHome", fields: [homeId], references: [id])
  homeId    String
  away      MatchTeam @relation("MatchesAway", fields: [awayId], references: [id])
  awayId    String

  round     Round     @relation(fields: [roundId], references: [id])
  roundId   String
}


// Storing Info about a team in a match (goals, shots on target, ball possession)
model MatchTeam {
  id String @id @default(uuid())
  score Int

  team   Team   @relation(fields: [teamId], references: [id])
  teamId String
  
  matchesHome Match[] @relation("MatchesHome")
  matchesAway Match[] @relation("MatchesAway")
}
